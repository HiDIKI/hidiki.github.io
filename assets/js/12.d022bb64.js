(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{219:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"멀티플-도커-파일"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#멀티플-도커-파일"}},[s._v("#")]),s._v(" * 멀티플 도커 파일")]),s._v(" "),t("Author",{attrs:{name:"Hidekuma"}}),s._v(" "),t("h2",{attrs:{id:"도커-오버라이드-default"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#도커-오버라이드-default"}},[s._v("#")]),s._v(" 도커 오버라이드 (Default)")]),s._v(" "),t("p",[s._v("도커 컴포즈가 컴포즈 파일을 따로 제시하지 않는 이상, "),t("code",[s._v("docker-compose.yml")]),s._v("을 읽는다는 것은 모두다 아는 사실이다. 하지만 실제로 도커 컴포즈는 기본적으로 다음과 같은 순서로 "),t("U",[s._v("2개의 파일")]),s._v("을 읽는다.")],1),s._v(" "),t("ol",[t("li",[t("code",[s._v("docker-compose.yml")])]),s._v(" "),t("li",[t("code",[s._v("docker-compose.override.yml")]),s._v(" (optional)")])]),s._v(" "),t("p",[t("code",[s._v("docker-compose.override.yml")]),s._v("은 옵셔널이며, 기본적으로는 "),t("code",[s._v("docker-compose.yml")]),s._v("에 베이스 설정을 하고, 오버라이드 파일통해서 해당 설정을 덮어쓰거나 생성한다. 주로 개발환경과 디플로이 환경을 구분하기 위해서 사용한다.")]),s._v(" "),t("h2",{attrs:{id:"예시-도커-오버라이드-default"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#예시-도커-오버라이드-default"}},[s._v("#")]),s._v(" 예시 - 도커 오버라이드 (Default)")]),s._v(" "),t("p",[s._v("하기 두개의 컴포즈파일이 동일선상에 있을 경우.")]),s._v(" "),t("h3",{attrs:{id:"예시파일"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#예시파일"}},[s._v("#")]),s._v(" 예시파일")]),s._v(" "),t("ul",[t("li",[t("U",[s._v("docker-compose.yml")])],1)]),s._v(" "),t("div",{staticClass:"language-docker line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  basic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    build"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .\n    command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from basic'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[t("U",[s._v("docker-compose.override.yml")])],1)]),s._v(" "),t("div",{staticClass:"language-docker line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  override"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    build"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .\n    command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from override'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"실행결과"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#실행결과"}},[s._v("#")]),s._v(" 실행결과")]),s._v(" "),t("p",[t("code",[s._v("docker-compose.yml")]),s._v("과 "),t("code",[s._v("docker-compose.override.yml")]),s._v("이 합쳐진다.")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ docker-compose config\nservices:\n  basic:\n    build:\n      context: /Users/hidekuma/Documents/private\n    command: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from basic'")]),s._v("\n  override:\n    build:\n      context: /Users/hidekuma/Documents/private\n    command: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from override'")]),s._v("\nversion: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3.0'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"만약-f커맨드-옵션을-사용할-경우"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#만약-f커맨드-옵션을-사용할-경우"}},[s._v("#")]),s._v(" 만약 "),t("code",[s._v("-f")]),s._v("커맨드 옵션을 사용할 경우")]),s._v(" "),t("p",[s._v("얼핏보면 두 커맨드가  동일하다고 생각할 수 있으나, "),t("code",[s._v("-f")]),s._v("옵션을 사용하면, 해당 파일만을 읽기 때문에 "),t("code",[s._v("docker-compose.override.yml")]),s._v("은 읽히지 않는다.")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ docker-compose config "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose.yml + docker-compose.override.yml")]),s._v("\n$ docker-compose -f docker-compose.yml config "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker-compose.yml")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("hr"),s._v(" "),t("h2",{attrs:{id:"커스텀-도커-오버라이드"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#커스텀-도커-오버라이드"}},[s._v("#")]),s._v(" 커스텀 도커 오버라이드")]),s._v(" "),t("p",[s._v("기본적으로 도커 컴포즈가 파일을 읽는 방법에 대해 알아봤는데, 그러면 우리는 꼭 오버라이드 할 파일을 "),t("code",[s._v("docker-compose.override.yml")]),s._v("로 정의해야 할까? "),t("strong",[s._v("방법은 있다. 위에서 잠시 거론했던 "),t("code",[s._v("-f")]),s._v(" 옵션을 사용하면 된다.")]),s._v(" 해당 옵션은 도커 컴포즈 파일의 "),t("code",[s._v("path")]),s._v("를 정의하는 옵션이다. 해당 옵션은 "),t("U",[s._v("복수번")]),s._v(" 사용할 수 있다.")],1),s._v(" "),t("h2",{attrs:{id:"예시-커스텀-도커-오버라이드"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#예시-커스텀-도커-오버라이드"}},[s._v("#")]),s._v(" 예시 - 커스텀 도커 오버라이드")]),s._v(" "),t("h3",{attrs:{id:"예시파일-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#예시파일-2"}},[s._v("#")]),s._v(" 예시파일")]),s._v(" "),t("ul",[t("li",[t("U",[s._v("docker-compose.test1.yml")])],1)]),s._v(" "),t("div",{staticClass:"language-docker line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  test1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    build"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .\n    command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from test1'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[t("U",[s._v("docker-compose.test2.yml")])],1)]),s._v(" "),t("div",{staticClass:"language-docker line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  test2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    build"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .\n    command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from test2'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[t("U",[s._v("docker-compose.test3.yml")])],1)]),s._v(" "),t("div",{staticClass:"language-docker line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-docker"}},[t("code",[s._v("version"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  test3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    build"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .\n    command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" echo "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from test3'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"실행결과-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#실행결과-2"}},[s._v("#")]),s._v(" 실행결과")]),s._v(" "),t("p",[t("code",[s._v("-f")]),s._v("옵션을 여러 번 사용하였다. 하단 코드의 결과는"),t("code",[s._v("docker-compose.test*.yml")]),s._v("을 모두 오버라이드 한다.")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ docker-compose -f docker-compose.test1.yml -f docker-compose.test2.yml -f docker-compose.test3.yml config\nservices:\n  test1:\n    build:\n      context: /Users/hidekuma/Documents/private\n    command: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from test1'")]),s._v("\n  test2:\n    build:\n      context: /Users/hidekuma/Documents/private\n    command: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from test2'")]),s._v("\n  test3:\n    build:\n      context: /Users/hidekuma/Documents/private\n    command: "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello from test3'")]),s._v("\nversion: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3.0'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);